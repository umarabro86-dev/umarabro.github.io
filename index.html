
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Parrots Info â€” Egg Hatching Timer</title>
  <style>
    :root{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;--bg:#f7fafc;--card:#fff;--muted:#6b7280;--accent:#0ea5a4}
    body{margin:0;background:var(--bg);color:#0f172a}
    header{background:linear-gradient(90deg,#06b6d4, #06a6d3);color:#fff;padding:18px 20px}
    .wrap{max-width:1100px;margin:20px auto;padding:16px}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:18px}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(2,6,23,0.08)}
    h1{margin:0;font-size:20px}
    .species-list{max-height:60vh;overflow:auto;padding:6px}
    .species-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;cursor:pointer}
    .species-item:hover{background:#f1f5f9}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;cursor:pointer}
    .btn.secondary{background:#e6e6e6;color:#0f172a}
    .timer-controls{display:flex;gap:8px;margin-top:12px}
    label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
    input[type=date], input[type=number], select{width:100%;padding:8px;border-radius:8px;border:1px solid #e6eef2}
    .progress{height:18px;border-radius:999px;background:#e6eef2;overflow:hidden;margin-top:10px}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#06b6d4,#0597a6);width:0%}
    footer{font-size:12px;color:var(--muted);padding:12px;text-align:center}
    .small{font-size:13px;color:var(--muted)}
    .controls-row{display:flex;gap:10px;flex-wrap:wrap}
    @media(max-width:880px){.grid{grid-template-columns:1fr;}.species-list{max-height:220px}}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Parrots Info â€” Egg Hatching Timer ðŸ¦œ</h1>
      <div class="small">Select a species, set the laying date, and run the incubation timer. Includes default incubation ranges for common parrot species.</div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- LEFT: species list and add custom -->
      <aside class="card">
        <h3>Species</h3>
        <div class="species-list" id="speciesList"></div>

        <label for="newName">Add custom species</label>
        <input id="newName" placeholder="Species name (e.g., Indian Ringneck)" />
        <label for="newDays">Typical incubation days (single number or range like 21-24)</label>
        <input id="newDays" placeholder="e.g., 21 or 21-24" />
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn" id="addSpeciesBtn">Add species</button>
          <button class="btn secondary" id="resetSpeciesBtn">Reset defaults</button>
        </div>
      </aside>

      <!-- RIGHT: Timer and details -->
      <section class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h2 id="selectedName">Select a species</h2>
            <div class="small" id="selectedRange"></div>
          </div>
          <div>
            <button class="btn" id="openInfo">Info</button>
          </div>
        </div>

        <label for="layingDate">Laying date (first egg laid)</label>
        <input type="date" id="layingDate" />

        <label for="eggCount">Number of eggs</label>
        <input type="number" id="eggCount" min="1" value="1" />

        <div class="controls-row">
          <button class="btn" id="startBtn">Start</button>
          <button class="btn secondary" id="pauseBtn">Pause</button>
          <button class="btn secondary" id="resetBtn">Reset</button>
          <button class="btn secondary" id="estimateBtn">Estimate Hatch Dates</button>
        </div>

        <div style="margin-top:14px">
          <div class="small">Progress to typical incubation period:</div>
          <div class="progress"><i id="progressBar"></i></div>
          <div style="margin-top:8px"><strong id="daysText">â€”</strong></div>
          <div class="small" id="etaText">Estimated hatch: â€”</div>
        </div>

        <hr style="margin:14px 0" />

        <h3>Live Timer</h3>
        <div class="small">Timer shows elapsed days/hours/minutes since laying date (pausable).</div>
        <div style="margin-top:10px;font-family:monospace;font-size:18px" id="liveTimer">00:00:00:00</div>

        <div style="margin-top:12px" id="hatchList"></div>

        <div style="margin-top:18px" class="small">Want Google AdSense? Add your AdSense script into this HTML where indicated (replace the placeholder). Using a custom domain helps AdSense approval.</div>

      </section>
    </div>

    <footer class="card" style="margin-top:18px">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div class="small">Built for hobbyists â€” incubation ranges are typical values and may vary by species and conditions. Always consult an avian vet or breeder for precise guidance.</div>
        <div class="small">Â© Parrots Info</div>
      </div>
    </footer>
  </main>

  <!-- Info modal (simple) -->
  <div id="modal" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.5);align-items:center;justify-content:center">
    <div style="background:#fff;padding:16px;border-radius:12px;max-width:640px;margin:16px">
      <h3>About incubation ranges</h3>
      <p class="small">These incubation values are typical ranges for common parrot species. "Incubation" here refers to the time from laying of an egg until hatching for that species. Environmental conditions, egg order, and parental habits can change exact timing. Use this tool for planning and tracking only.</p>
      <div style="text-align:right;margin-top:12px"><button class="btn" id="closeModal">Close</button></div>
    </div>
  </div>

  <script>
    // Default species data (typical incubation periods in days)
    const defaultSpecies = {
      "Budgerigar (Budgie)": [18,21],
      "Cockatiel": [18,21],
      "Lovebird": [21,23],
      "Indian Ringneck": [23,26],
      "Conure (general)": [23,28],
      "Cockatoo (small-medium)": [21,28],
      "African Grey": [24,28],
      "Amazon (parrot)": [23,28],
      "Macaw (large)": [24,28],
      "Pionus": [26,28]
    };

    // Utilities to persist custom species in localStorage
    function loadSpecies(){
      const saved = localStorage.getItem('parrots_species_v1');
      if(saved){
        try{return JSON.parse(saved);}catch(e){}
      }
      return defaultSpecies;
    }
    function saveSpecies(obj){
      localStorage.setItem('parrots_species_v1', JSON.stringify(obj));
    }

    let speciesData = loadSpecies();
    const speciesListEl = document.getElementById('speciesList');
    const selectedNameEl = document.getElementById('selectedName');
    const selectedRangeEl = document.getElementById('selectedRange');
    const layingDateEl = document.getElementById('layingDate');
    const eggCountEl = document.getElementById('eggCount');
    const progressBar = document.getElementById('progressBar');
    const daysText = document.getElementById('daysText');
    const etaText = document.getElementById('etaText');
    const liveTimer = document.getElementById('liveTimer');
    const hatchList = document.getElementById('hatchList');

    let selectedSpecies = null;
    let timerInterval = null;
    let paused = false;

    function renderSpecies(){
      speciesListEl.innerHTML = '';
      Object.keys(speciesData).forEach(name=>{
        const div = document.createElement('div');
        div.className='species-item';
        div.innerHTML = `<span>${name}</span><small class='small'>${speciesData[name][0]}${speciesData[name][1] ? 'â€“'+speciesData[name][1] : ''}d</small>`;
        div.addEventListener('click',()=>selectSpecies(name));
        speciesListEl.appendChild(div);
      })
    }

    function selectSpecies(name){
      selectedSpecies = name;
      selectedNameEl.textContent = name;
      const range = speciesData[name];
      selectedRangeEl.textContent = `Typical incubation: ${range[0]}${range[1]? 'â€“'+range[1] : ''} days`;
      updateDisplay();
    }

    function parseRangeInput(input){
      if(!input) return null;
      if(input.includes('-')){
        const parts = input.split('-').map(s=>parseInt(s.trim()));
        if(parts.length===2 && !isNaN(parts[0]) && !isNaN(parts[1])) return [parts[0],parts[1]];
      }
      const n = parseInt(input);
      if(!isNaN(n)) return [n,n];
      return null;
    }

    document.getElementById('addSpeciesBtn').addEventListener('click',()=>{
      const name = document.getElementById('newName').value.trim();
      const days = document.getElementById('newDays').value.trim();
      if(!name || !days){alert('Enter both name and days');return}
      const parsed = parseRangeInput(days);
      if(!parsed){alert('Invalid days. Use a number or range like 21-24');return}
      speciesData[name]=parsed;
      saveSpecies(speciesData);
      document.getElementById('newName').value='';document.getElementById('newDays').value='';
      renderSpecies();
      selectSpecies(name);
    });

    document.getElementById('resetSpeciesBtn').addEventListener('click',()=>{
      if(!confirm('Reset to default species list?')) return;
      speciesData = defaultSpecies;
      saveSpecies(speciesData);
      renderSpecies();
      selectedSpecies = null;
      selectedNameEl.textContent = 'Select a species';
      selectedRangeEl.textContent='';
      updateDisplay();
    });

    // Timer control handlers
    document.getElementById('startBtn').addEventListener('click',()=>{
      if(!selectedSpecies){alert('Choose a species first');return}
      const lay = layingDateEl.value;
      if(!lay){alert('Set a laying date');return}
      if(timerInterval) clearInterval(timerInterval);
      paused=false;
      timerInterval = setInterval(tick,1000);
      tick();
    });
    document.getElementById('pauseBtn').addEventListener('click',()=>{
      if(timerInterval){
        clearInterval(timerInterval);timerInterval=null;paused=true;
      }
    });
    document.getElementById('resetBtn').addEventListener('click',()=>{
      if(timerInterval){clearInterval(timerInterval);timerInterval=null}
      paused=false;liveTimer.textContent='00:00:00:00';progressBar.style.width='0%';daysText.textContent='â€”';etaText.textContent='Estimated hatch: â€”';hatchList.innerHTML='';
    });

    document.getElementById('estimateBtn').addEventListener('click',()=>{
      estimateHatches();
    });

    function tick(){
      const lay = layingDateEl.value;
      if(!lay || !selectedSpecies) return;
      const start = new Date(lay + 'T00:00:00');
      const now = new Date();
      const diffMs = now - start;
      if(diffMs<0){liveTimer.textContent='Not started';return}
      const diffDays = Math.floor(diffMs / (1000*60*60*24));
      const hours = Math.floor(diffMs/(1000*60*60))%24;
      const minutes = Math.floor(diffMs/(1000*60))%60;
      const seconds = Math.floor(diffMs/1000)%60;
      liveTimer.textContent = `${pad(diffDays)}d ${pad(hours)}h ${pad(minutes)}m ${pad(seconds)}s`;

      // progress relative to median of range
      const range = speciesData[selectedSpecies];
      const target = (range[0] + (range[1]||range[0]))/2;
      const perc = Math.min(100, Math.max(0, (diffDays/target)*100));
      progressBar.style.width = perc + '%';
      daysText.textContent = `${diffDays} day(s) elapsed â€” ${Math.round(perc)}% of typical incubation`;

      // ETA based on lower/upper range
      const etaLower = new Date(start.getTime() + range[0]*24*3600*1000);
      const etaUpper = new Date(start.getTime() + (range[1]||range[0])*24*3600*1000);
      etaText.textContent = `Estimated hatch window: ${formatDate(etaLower)} â€” ${formatDate(etaUpper)}`;

      // update hatch list if eggs more than 1: assume 1 day gaps (simple model)
      renderHatchList();
    }

    function estimateHatches(){
      if(!selectedSpecies){alert('Select a species to estimate');return}
      if(!layingDateEl.value){alert('Set a laying date');return}
      renderHatchList(true);
    }

    function renderHatchList(force){
      const lay = layingDateEl.value;
      if(!lay) return;
      const start = new Date(lay+'T00:00:00');
      const eggs = Math.max(1, parseInt(eggCountEl.value)||1);
      const range = speciesData[selectedSpecies];
      hatchList.innerHTML='';
      for(let i=0;i<eggs;i++){
        // assume eggs are laid 1 day apart (typical for many parrots) â€” this is a simplification
        const eggLay = new Date(start.getTime() + i*24*3600*1000);
        const hatchEarliest = new Date(eggLay.getTime() + range[0]*24*3600*1000);
        const hatchLatest = new Date(eggLay.getTime() + (range[1]||range[0])*24*3600*1000);
        const div = document.createElement('div');
        div.style.padding='8px 0';
        div.innerHTML = `<strong>Egg ${i+1}:</strong> Laid ${formatDate(eggLay)} â€” Hatch window: ${formatDate(hatchEarliest)} â†’ ${formatDate(hatchLatest)}`;
        hatchList.appendChild(div);
      }
    }

    function pad(n){return String(n).padStart(2,'0')}
    function formatDate(d){return d.toISOString().slice(0,10)}

    function updateDisplay(){
      if(!selectedSpecies){selectedRangeEl.textContent='';return}
      // if laying date present, update tick once
      tick();
    }

    // Modal
    document.getElementById('openInfo').addEventListener('click',()=>{document.getElementById('modal').style.display='flex'});
    document.getElementById('closeModal').addEventListener('click',()=>{document.getElementById('modal').style.display='none'});

    // init
    renderSpecies();
    // select first species by default
    const first = Object.keys(speciesData)[0];
    if(first) selectSpecies(first);

    // Accessibility: allow clicking species with keyboard
    speciesListEl.addEventListener('keydown',(e)=>{if(e.key==='Enter' && e.target) e.target.click();});

    // Note: To add Google AdSense, insert the official <script> snippet into this HTML head/body where indicated and replace the publisher id.

  </script>
</body>
</html>
